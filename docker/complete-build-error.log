time="2025-11-16T11:32:22+01:00" level=warning msg="/Users/bleterrier/Developement/wazuh-4.14.1/docker/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 720B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 10.65kB done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/ubuntu:24.04
#3 DONE 0.8s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [builder  1/15] FROM docker.io/library/ubuntu:24.04@sha256:c35e29c9450151419d9448b0fd75374fec4fff364a27f176fb458d472dfc9e54
#5 resolve docker.io/library/ubuntu:24.04@sha256:c35e29c9450151419d9448b0fd75374fec4fff364a27f176fb458d472dfc9e54 0.0s done
#5 DONE 0.0s

#6 [internal] load build context
#6 transferring context: 526.20kB 0.1s done
#6 DONE 0.2s

#7 [stage-1  8/23] RUN groupadd -r ossec 2>/dev/null || true &&     groupadd -r wazuh 2>/dev/null || true &&     useradd -r -g ossec -G wazuh -d /var/ossec -s /sbin/nologin ossec 2>/dev/null || true
#7 CACHED

#8 [stage-1  9/23] RUN useradd -r -g wazuh -G ossec,wazuh -d /var/ossec -s /sbin/nologin wazuh 2>/dev/null || true
#8 CACHED

#9 [stage-1 10/23] RUN getent passwd wazuh
#9 CACHED

#10 [stage-1  4/23] COPY --from=builder /var/ossec /var/ossec
#10 CACHED

#11 [stage-1  3/23] RUN pip3 install --no-cache-dir requests sqlalchemy 2>/dev/null ||     pip3 install --no-cache-dir --break-system-packages requests sqlalchemy
#11 CACHED

#12 [builder 14/15] RUN chmod +x /build/*.sh
#12 CACHED

#13 [builder 15/15] RUN set -ex &&     cd /build/src &&     echo "========================================" &&     echo "Downloading external dependencies..." &&     echo "========================================" &&     make deps TARGET=server || {         echo "ERROR: Failed to download dependencies";         echo "This usually means network issues or missing tools";         exit 1;     } &&     echo "" &&     echo "========================================" &&     echo "Building Wazuh (this takes 20-60 min)..." &&     echo "Using 4 parallel jobs" &&     echo "========================================" &&     make TARGET=server DEBUG=0 build -j4 || {         echo "ERROR: Build failed";         echo "Check if you have enough RAM (need 4GB+)";         echo "Try reducing BUILD_JOBS in .env file";         exit 1;     } &&     echo "" &&     echo "========================================" &&     echo "Installing Wazuh..." &&     echo "========================================" &&     cd /build &&     mkdir -p /var/ossec &&     export USER_LANGUAGE="en" &&     export USER_NO_STOP="y" &&     export USER_INSTALL_TYPE="server" &&     export USER_DIR="/var/ossec" &&     export USER_DELETE_DIR="y" &&     export USER_CLEANINSTALL="y" &&     export USER_BINARYINSTALL="yes" &&     export USER_AGENT_SERVER_IP="MANAGER_IP" &&     export USER_ENABLE_SYSCHECK="y" &&     export USER_ENABLE_ROOTCHECK="y" &&     export USER_ENABLE_ACTIVE_RESPONSE="y" &&     export USER_CA_STORE="n" &&     ./install.sh || {         echo "ERROR: Installation failed";         cat /var/ossec/logs/ossec.log 2>/dev/null || true;         exit 1;     } &&     echo "" &&     echo "========================================" &&     echo "Installing Python environment..." &&     echo "========================================" &&     cd /build/src &&     make install_python INSTALLDIR=/var/ossec || {         echo "ERROR: Python installation failed";         exit 1;     } &&     echo "" &&     echo "========================================" &&     echo "Installing Wazuh Framework..." &&     echo "========================================" &&     make install_framework INSTALLDIR=/var/ossec WAZUH_GROUP=wazuh || {         echo "ERROR: Framework installation failed";         exit 1;     } &&     echo "" &&     echo "========================================" &&     echo "Installing Wazuh API..." &&     echo "========================================" &&     cd /build/api &&     make install INSTALLDIR=/var/ossec WAZUH_GROUP=wazuh || {         echo "ERROR: API installation failed";         exit 1;     } &&     echo "" &&     echo "========================================" &&     echo "Build completed successfully!" &&     echo "========================================"
#13 CACHED

#14 [builder  5/15] COPY etc/ /build/etc/
#14 CACHED

#15 [builder 13/15] COPY add_localfiles.sh /build/
#15 CACHED

#16 [stage-1 11/23] RUN getent group wazuh
#16 CACHED

#17 [stage-1 13/23] RUN mkdir -p     /var/ossec/logs     /var/ossec/etc     /var/ossec/etc/decoders     /var/ossec/etc/rules     /var/ossec/queue/alerts     /var/ossec/queue/rids     /var/ossec/queue/fts     /var/ossec/queue/syscheck     /var/ossec/queue/rootcheck     /var/ossec/queue/diff     /var/ossec/queue/fim/db     /var/ossec/queue/db     /var/ossec/var/db     /var/ossec/stats     /var/ossec/tmp     /var/ossec/var/run
#17 CACHED

#18 [builder  7/15] COPY framework/ /build/framework/
#18 CACHED

#19 [builder  2/15] RUN apt-get update && apt-get install -y     build-essential     cmake     gcc     g++     make     git     wget     curl     pkg-config     libssl-dev     libsqlite3-dev     libarchive-dev     libpcre2-dev     zlib1g-dev     libbz2-dev     liblzma-dev     python3-dev     python3-pip     libjemalloc-dev     nlohmann-json3-dev     libcjson-dev     libsystemd-dev     libyaml-dev     libffi-dev     autoconf     automake     libtool     ca-certificates     libcurl4-openssl-dev     libreadline-dev     libpam0g-dev     libdb-dev     libaudit-dev     libgtest-dev     libgmock-dev     libboost-all-dev     uuid-dev     libpopt-dev     rpm     && rm -rf /var/lib/apt/lists/*
#19 CACHED

#20 [builder  4/15] COPY src/ /build/src/
#20 CACHED

#21 [builder  9/15] COPY tools/ /build/tools/
#21 CACHED

#22 [builder  3/15] WORKDIR /build
#22 CACHED

#23 [builder  6/15] COPY ruleset/ /build/ruleset/
#23 CACHED

#24 [stage-1  5/23] COPY --from=builder /build/framework /var/ossec/framework
#24 CACHED

#25 [builder 11/15] COPY install.sh /build/
#25 CACHED

#26 [builder 10/15] COPY VERSION.json /build/
#26 CACHED

#27 [builder 12/15] COPY gen_ossec.sh /build/
#27 CACHED

#28 [stage-1 12/23] RUN getent group ossec
#28 CACHED

#29 [stage-1  2/23] RUN apt-get update && apt-get install -y     curl     wget     gnupg     libc6     nano     gdb     nano     strace     libgcc-s1     libssl3     libsqlite3-0     libarchive13     libpcre2-8-0     zlib1g     libbz2-1.0     liblzma5     python3     python3-pip     libjemalloc2     libcjson1     libsystemd0     libyaml-0-2     libffi8     procps     net-tools     iproute2     ca-certificates     libcurl4     libpam0g     libdb5.3     libaudit1     uuid-runtime     libpopt0     && rm -rf /var/lib/apt/lists/*
#29 CACHED

#30 [builder  8/15] COPY api/ /build/api/
#30 CACHED

#31 [stage-1  7/23] COPY --from=builder /build/ruleset /var/ossec/ruleset
#31 CACHED

#32 [stage-1  6/23] COPY --from=builder /build/tools /var/ossec/tools
#32 CACHED

#33 [stage-1 14/23] RUN chown -R ossec:ossec /var/ossec &&     chmod -R 750 /var/ossec/logs                   /var/ossec/queue                   /var/ossec/stats                   /var/ossec/tmp                   /var/ossec/var &&     chmod 770 /var/ossec/var/run &&     chmod +x /var/ossec/bin/* 2>/dev/null || true &&     find /var/ossec/api -type d -exec chmod g+rx {} ; 2>/dev/null || true &&     find /var/ossec/framework -type d -exec chmod g+rx {} ; 2>/dev/null || true
#33 CACHED

#34 [stage-1 15/23] COPY docker/scripts/entrypoint.sh /usr/local/bin/
#34 DONE 0.1s

#35 [stage-1 16/23] COPY docker/scripts/init-databases.sh /usr/local/bin/
#35 DONE 0.0s

#36 [stage-1 17/23] COPY docker/scripts/healthcheck.sh /usr/local/bin/
#36 DONE 0.0s

#37 [stage-1 18/23] RUN chmod +x /usr/local/bin/entrypoint.sh /usr/local/bin/init-databases.sh /usr/local/bin/healthcheck.sh
#37 DONE 0.1s

#38 [stage-1 19/23] COPY etc/decoders/ /var/ossec/etc/decoders/
#38 DONE 0.1s

#39 [stage-1 20/23] COPY etc/rules/ /var/ossec/etc/rules/
#39 DONE 0.0s

#40 [stage-1 21/23] RUN chmod -R 755 /var/ossec/etc/decoders /var/ossec/etc/rules /var/ossec/ruleset 2>/dev/null || true &&     chmod -R 755 /var/ossec/etc/lists 2>/dev/null || true &&     chmod -R 644 /var/ossec/etc/decoders/* /var/ossec/etc/rules/* /var/ossec/ruleset/decoders/* /var/ossec/ruleset/rules/* 2>/dev/null || true &&     chmod -R 644 /var/ossec/etc/lists/* 2>/dev/null || true &&     find /var/ossec/etc/decoders -type d -exec chmod 755 {} ; 2>/dev/null || true &&     find /var/ossec/etc/rules -type d -exec chmod 755 {} ; 2>/dev/null || true &&     find /var/ossec/etc/lists -type d -exec chmod 755 {} ; 2>/dev/null || true &&     find /var/ossec/ruleset -type d -exec chmod 755 {} ; 2>/dev/null || true &&     chown -R ossec:ossec /var/ossec/etc/decoders /var/ossec/etc/rules /var/ossec/ruleset 2>/dev/null || true &&     chown -R ossec:ossec /var/ossec/etc/lists 2>/dev/null || true
#40 DONE 0.2s

#41 [stage-1 22/23] RUN rm -f /var/ossec/var/run/*.pid* /var/ossec/var/run/*.state /var/ossec/var/run/*.failed 2>/dev/null || true &&     rm -f /var/ossec/.docker_initialized 2>/dev/null || true
#41 DONE 0.1s

#42 [stage-1 23/23] WORKDIR /var/ossec
#42 DONE 0.0s

#43 exporting to image
#43 exporting layers
#43 exporting layers 0.5s done
#43 writing image sha256:ff870fc70071f8293a010106714ec1db366f1fbf3611ce36004ba2e86e883618 done
#43 naming to docker.io/library/wazuh-quickwit:latest done
#43 DONE 0.5s

#44 resolving provenance for metadata file
#44 DONE 0.0s
 wazuh-quickwit:latest  Built
