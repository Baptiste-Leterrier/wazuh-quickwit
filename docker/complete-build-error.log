time="2025-11-15T12:56:33+01:00" level=warning msg="/Users/bleterrier/Developement/wazuh-4.14.1/docker/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 720B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 8.30kB done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/ubuntu:24.04
#3 DONE 1.0s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [builder  1/13] FROM docker.io/library/ubuntu:24.04@sha256:e96e81f410a9f9cae717e6cdd88cc2a499700ff0bb5061876ad24377fcc517d7
#5 DONE 0.0s

#6 [internal] load build context
#6 transferring context: 480.75kB 0.2s done
#6 DONE 0.2s

#7 [stage-1  2/16] RUN apt-get update && apt-get install -y     curl     wget     gnupg     libc6     libgcc-s1     libssl3     libsqlite3-0     libarchive13     libpcre2-8-0     zlib1g     libbz2-1.0     liblzma5     python3     python3-pip     libjemalloc2     libcjson1     libsystemd0     libyaml-0-2     libffi8     procps     net-tools     iproute2     ca-certificates     libcurl4     libpam0g     libdb5.3     libaudit1     uuid-runtime     libpopt0     && rm -rf /var/lib/apt/lists/*
#7 CACHED

#8 [builder  9/13] COPY install.sh /build/
#8 CACHED

#9 [builder  4/13] COPY src/ /build/src/
#9 CACHED

#10 [stage-1  8/16] RUN getent passwd wazuh
#10 CACHED

#11 [builder  7/13] COPY api/ /build/api/
#11 CACHED

#12 [stage-1  4/16] COPY --from=builder /var/ossec /var/ossec
#12 CACHED

#13 [builder 10/13] COPY gen_ossec.sh /build/
#13 CACHED

#14 [stage-1 11/16] RUN mkdir -p     /var/ossec/logs     /var/ossec/etc     /var/ossec/etc/decoders     /var/ossec/etc/rules     /var/ossec/queue/alerts     /var/ossec/queue/rids     /var/ossec/queue/fts     /var/ossec/queue/syscheck     /var/ossec/queue/rootcheck     /var/ossec/queue/diff     /var/ossec/queue/fim/db     /var/ossec/stats     /var/ossec/tmp     /var/ossec/var/run
#14 CACHED

#15 [builder  5/13] COPY etc/ /build/etc/
#15 CACHED

#16 [builder  3/13] WORKDIR /build
#16 CACHED

#17 [stage-1  7/16] RUN useradd -r -g wazuh -G ossec,wazuh -d /var/ossec -s /sbin/nologin wazuh 2>/dev/null || true
#17 CACHED

#18 [stage-1  9/16] RUN getent group wazuh
#18 CACHED

#19 [builder  6/13] COPY framework/ /build/framework/
#19 CACHED

#20 [builder  8/13] COPY VERSION.json /build/
#20 CACHED

#21 [builder  2/13] RUN apt-get update && apt-get install -y     build-essential     cmake     gcc     g++     make     git     wget     curl     pkg-config     libssl-dev     libsqlite3-dev     libarchive-dev     libpcre2-dev     zlib1g-dev     libbz2-dev     liblzma-dev     python3-dev     python3-pip     libjemalloc-dev     nlohmann-json3-dev     libcjson-dev     libsystemd-dev     libyaml-dev     libffi-dev     autoconf     automake     libtool     ca-certificates     libcurl4-openssl-dev     libreadline-dev     libpam0g-dev     libdb-dev     libaudit-dev     libgtest-dev     libgmock-dev     libboost-all-dev     uuid-dev     libpopt-dev     rpm     && rm -rf /var/lib/apt/lists/*
#21 CACHED

#22 [stage-1  6/16] RUN groupadd -r ossec 2>/dev/null || true &&     groupadd -r wazuh 2>/dev/null || true &&     useradd -r -g ossec -G wazuh -d /var/ossec -s /sbin/nologin ossec 2>/dev/null || true
#22 CACHED

#23 [builder 13/13] RUN set -ex &&     cd /build/src &&     echo "========================================" &&     echo "Downloading external dependencies..." &&     echo "========================================" &&     make deps TARGET=server || {         echo "ERROR: Failed to download dependencies";         echo "This usually means network issues or missing tools";         exit 1;     } &&     echo "" &&     echo "========================================" &&     echo "Building Wazuh (this takes 20-60 min)..." &&     echo "Using 4 parallel jobs" &&     echo "========================================" &&     make TARGET=server DEBUG=0 build -j4 || {         echo "ERROR: Build failed";         echo "Check if you have enough RAM (need 4GB+)";         echo "Try reducing BUILD_JOBS in .env file";         exit 1;     } &&     echo "" &&     echo "========================================" &&     echo "Installing Wazuh..." &&     echo "========================================" &&     cd /build &&     mkdir -p /var/ossec &&     export USER_LANGUAGE="en" &&     export USER_NO_STOP="y" &&     export USER_INSTALL_TYPE="server" &&     export USER_DIR="/var/ossec" &&     export USER_DELETE_DIR="y" &&     export USER_CLEANINSTALL="y" &&     export USER_BINARYINSTALL="yes" &&     export USER_AGENT_SERVER_IP="MANAGER_IP" &&     export USER_ENABLE_SYSCHECK="y" &&     export USER_ENABLE_ROOTCHECK="y" &&     export USER_ENABLE_ACTIVE_RESPONSE="y" &&     export USER_CA_STORE="n" &&     ./install.sh || {         echo "ERROR: Installation failed";         cat /var/ossec/logs/ossec.log 2>/dev/null || true;         exit 1;     } &&     echo "" &&     echo "========================================" &&     echo "Installing Python environment..." &&     echo "========================================" &&     cd /build/src &&     make install_python INSTALLDIR=/var/ossec || {         echo "ERROR: Python installation failed";         exit 1;     } &&     echo "" &&     echo "========================================" &&     echo "Installing Wazuh Framework..." &&     echo "========================================" &&     make install_framework INSTALLDIR=/var/ossec WAZUH_GROUP=wazuh || {         echo "ERROR: Framework installation failed";         exit 1;     } &&     echo "" &&     echo "========================================" &&     echo "Installing Wazuh API..." &&     echo "========================================" &&     cd /build/api &&     make install INSTALLDIR=/var/ossec WAZUH_GROUP=wazuh || {         echo "ERROR: API installation failed";         exit 1;     } &&     echo "" &&     echo "========================================" &&     echo "Build completed successfully!" &&     echo "========================================"
#23 CACHED

#24 [stage-1  5/16] COPY --from=builder /build/framework /var/ossec/framework
#24 CACHED

#25 [builder 12/13] RUN chmod +x /build/*.sh
#25 CACHED

#26 [stage-1  3/16] RUN pip3 install --no-cache-dir requests 2>/dev/null ||     pip3 install --no-cache-dir --break-system-packages requests
#26 CACHED

#27 [stage-1 10/16] RUN getent group ossec
#27 CACHED

#28 [builder 11/13] COPY add_localfiles.sh /build/
#28 CACHED

#29 [stage-1 12/16] RUN chown -R ossec:ossec /var/ossec &&     chmod -R 750 /var/ossec/logs                   /var/ossec/queue                   /var/ossec/stats                   /var/ossec/tmp                   /var/ossec/var &&     chmod 770 /var/ossec/var/run &&     chmod +x /var/ossec/bin/* 2>/dev/null || true &&     find /var/ossec/api -type d -exec chmod g+rx {} ; 2>/dev/null || true &&     find /var/ossec/framework -type d -exec chmod g+rx {} ; 2>/dev/null || true
#29 CACHED

#30 [stage-1 13/16] COPY docker/scripts/entrypoint.sh /usr/local/bin/
#30 DONE 0.1s

#31 [stage-1 14/16] COPY docker/scripts/healthcheck.sh /usr/local/bin/
#31 DONE 0.0s

#32 [stage-1 15/16] RUN chmod +x /usr/local/bin/entrypoint.sh /usr/local/bin/healthcheck.sh
#32 DONE 0.2s

#33 [stage-1 16/16] WORKDIR /var/ossec
#33 DONE 0.1s

#34 exporting to image
#34 exporting layers 0.1s done
#34 writing image sha256:1a83411da56933d762cf6ab79201c1aeb37591ad8b9770c33c42508924597acc done
#34 naming to docker.io/library/wazuh-quickwit:latest done
#34 DONE 0.1s

#35 resolving provenance for metadata file
#35 DONE 0.0s
 wazuh-quickwit:latest  Built
